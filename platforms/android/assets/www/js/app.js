function sendAnalyticsInfo(){try{window.analytics.startTrackerWithId("UA-69271459-1"),window.analytics.setUserId(window.localStorage.email),window.analytics.trackView("Home Screen")}catch(e){}}function showAlertMessage(e){navigator.notification.alert(e,function(){},"College LoopIn","Close")}var pictureSource,destinationType,serverPrefix="http://sample-env.eitygw92j2.us-east-2.elasticbeanstalk.com",app={initialize:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,!1)},onDeviceReady:function(){function e(){$("#loginForm");if(void 0!=window.localStorage.email&&void 0!=window.localStorage.password){sendAnalyticsInfo();window.localStorage.email,window.localStorage.password;$.post("json/structure.json",{email:"aa"},function(e){$("#toolbar").show(),$("#category-page").show()},"json")}else $.get(serverPrefix+"/collegeInfo/getAllCollegeInfos",function(e){var t=e.success;if(t)var r=e.data;else{var a=e.message;showAlertMessage(a)}if(t){window.localStorage.collegeData=JSON.stringify(r);var o=$.parseJSON(window.localStorage.getItem("collegeData")),i=[];$.each(o,function(e,t){i.push(t.collegeName)}),$("#register_college").autocomplete({source:i,change:function(e,t){(null==t.item||void 0==t.item)&&($(this).val(""),$(this).attr("disabled",!1))}}),menu.setSwipeable(!1),$("#loginPage").show()}}).fail(function(){showAlertMessage("Sorry,no internet connection available right now.Please try again later."),menu.setSwipeable(!1),$("#loginPage").show()})}try{var t=PushNotification.init({android:{senderID:"428357888802"},ios:{alert:"true",badge:"true",sound:"true"},windows:{}});t.on("registration",function(e){window.localStorage.regIdPush=e.registrationId}),t.on("notification",function(e){}),t.on("error",function(e){})}catch(r){}app.receivedEvent("deviceready"),void 0!=navigator.camera&&(pictureSource=navigator.camera.PictureSourceType,destinationType=navigator.camera.DestinationType),ons.setDefaultDeviceBackButtonListener(function(){navigator.app.exitApp()}),$(document).on("click","a[href^=http], a[href^=https]",function(e){e.preventDefault();var t=$(this),r=t.data("inAppBrowser")||"_blank";window.open(t.attr("href"),r)}),e(),app.updateInterestedCategories(),app.getCount("Notices")},getCount:function(e){if(void 0!=window.localStorage.profileData){var t=$.parseJSON(window.localStorage.getItem("profileData")),r=[];if(null!=t){$.each(t.interestedCategories,function(e,t){r.push(t.categoryId)});var a=r.join(","),o=[];$.each(t.interestedCategories,function(t,r){if(void 0!=window.localStorage["feedEntriesData"+e+r.categoryId+r.categoryName]){var a=JSON.parse(window.localStorage.getItem("feedEntriesData"+e+r.categoryId+r.categoryName));"undefined"!=typeof a[0]&&"undefined"!=typeof a[0].publishedDate?o.push(a[0].publishedDate):o.push(0)}else o.push(0)});var i=o.join(",");"Notices"==e&&(getCountUrl=serverPrefix+"/noticeInfo/getNoticesInfoForCategories?userId="+t.user_id+"&categoriesToFetch="+a+"&dates="+i),$.get(getCountUrl,function(r){$.each(t.interestedCategories,function(t,r){window.localStorage["#notification"+e+"Count-"+r.categoryId]=0}),$.each(r,function(t,r){$("#notification"+e+"Count-"+t).text(r),r>0&&$("#notificationNew"+e).text("New "+e),window.localStorage["#notification"+e+"Count-"+t]=r.mostRecentNoticeCount,window.localStorage["#notificationTimestamp"+e+"Date-"+t]=r.mostRecentNoticeDate})}).fail(function(){})}}},updateInterestedCategories:function(){if(void 0!=window.localStorage.email||void 0!=window.localStorage.password){var e=window.localStorage.getItem("email"),t=window.localStorage.getItem("password"),r=serverPrefix+"/userInfo/userSignIn?userEmail="+e+"&userPassword="+t;$.get(r,function(e){var t=e.success;if(t)var r=e.data.userName,a=e.data.rollNumber,o=e.data.yearGrad,i=e.data.branch,n=e.data.company,s=e.data.userId,l=e.data.contactNumber,c=e.data.emailAddress,d=e.data.password,g=e.data.collegeName,u=e.data.userCategories,m=e.data.collegeBranches,p=e.data.status,f=e.data.fbUrl,w=e.data.twitterUrl,h=e.data.linkedinUrl,v=e.data.interests,y=e.data.specialUser;if(t){var b={register_email:c,user_id:s,contact_nos:l,register_yearGrad:o,register_branch:i,register_company:n,register_password:d,register_name:r,register_college:g,register_roll:a,interestedCategories:u,userCollegeBranches:m,register_status:p,register_fbUrl:f,register_twitterUrl:w,register_linkedinUrl:h,register_interests:v,special_user:y};window.localStorage.profileData=JSON.stringify(b)}}).fail(function(){})}},receivedEvent:function(e){}};!function(){"use strict";var e=angular.module("sensationFeedPlugin",["onsen","sensationFeedPlugin.data","ngSanitize"]);document.addEventListener("deviceready",function(){angular.bootstrap(document,["sensationFeedPlugin"])},!1),e.controller("loginController",["$scope","$http","FeedPluginData",function(e,t,r){e.forgotPassword=function(){var r=$("#loginForm");$("#submitButton",r).attr("disabled","disabled");var a=$("#email",r).val();""!=a?(t({method:"GET",url:serverPrefix+"/userInfo/forgotPassword?userEmail="+a,async:!1}).success(function(e,t,r,a){var o=e.success;if(o)showAlertMessage("Your existing password has been sent to your registered email address !!");else{var i=e.message;showAlertMessage(i)}}).error(function(t,r,a,o){alert("Sorry,no internet connection available right now.Please try again later."),e.isLoggedIn="no"}),$("#submitButton").removeAttr("disabled")):showAlertMessage("You must enter a valid email address")},e.userLogin=function(){var r=$("#loginForm");$("#submitButton",r).attr("disabled","disabled");var a=$("#email",r).val(),o=$("#password",r).val(),i=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;""!=a&&""!=o&&a.match(i)?(t({method:"GET",url:serverPrefix+"/userInfo/userSignIn?userEmail="+a+"&userPassword="+o,async:!1}).success(function(e,t,r,a){var o=e.success;if(o)var i=e.data.userName,n=e.data.rollNumber,s=e.data.yearGrad,l=e.data.branch,c=e.data.company,d=e.data.userId,g=e.data.contactNumber,u=e.data.emailAddress,m=e.data.password,p=e.data.collegeName,f=e.data.userCategories,w=e.data.collegeBranches,h=e.data.status,v=e.data.fbUrl,y=e.data.twitterUrl,b=e.data.linkedinUrl,_=e.data.interests,I=e.data.specialUser;else{var S=e.message;showAlertMessage(S)}if(o){window.localStorage.email=u,window.localStorage.password=m;var N={register_email:u,user_id:d,contact_nos:g,register_yearGrad:s,register_branch:l,register_company:c,register_password:m,register_name:i,register_college:p,register_roll:n,interestedCategories:f,userCollegeBranches:w,register_status:h,register_fbUrl:v,register_twitterUrl:y,register_linkedinUrl:b,register_interests:_,special_user:I};window.localStorage.profileData=JSON.stringify(N),$("#loginPage").hide(),$("#toolbar").show(),$("#category-page").show(),app.getCount("Notices"),menu.setSwipeable(!0)}}).error(function(t,r,a,o){showAlertMessage("Sorry,no internet connection available right now.Please try again later."),e.isLoggedIn="no"}),$("#submitButton").removeAttr("disabled")):(showAlertMessage("You must enter valid email and password"),$("#submitButton").removeAttr("disabled"))},$("#login-form-link").click(function(e){$("#loginForm").delay(100).fadeIn(100),$("#registerForm").fadeOut(100),$("#register-form-link").removeClass("active"),$(this).addClass("active"),e.preventDefault()})}]),e.controller("registerController",["$scope","$http","FeedPluginData",function(e,t,r){$("#register-form-link").click(function(e){$("#registerForm").delay(100).fadeIn(100),$("#loginForm").fadeOut(100),$("#login-form-link").removeClass("active"),$(this).addClass("active"),e.preventDefault()}),e.userRegister=function(){var e="iPad"==navigator.userAgent.match(/iPad/i)?"iPad":"iPhone"==navigator.userAgent.match(/iPhone/i)?"iPhone":"Android"==navigator.userAgent.match(/Android/i)?"Android":"BlackBerry"==navigator.userAgent.match(/BlackBerry/i)?"BlackBerry":"null",r=$("#registerForm");$("#register_submitButton",r).attr("disabled","disabled");var a=$("#register_email",r).val(),o=$("#register_password",r).val(),i=$("#register_confirmPassword",r).val(),n=$("#register_name",r).val(),s=$("#register_roll",r).val(),l=$("#register_college",r).val(),c=$("#register_contactNumber",r).val(),d=$("#referenceCode",r).val(),g=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(""!=a&&""!=o&&o==i&&a.match(g)){var u=new FormData;u.append("userName",n),u.append("rollNumber",s),u.append("contactNumber",c),u.append("email",a),u.append("password",o),u.append("collegeName",l),u.append("referenceCode",d),u.append("deviceType",e);var m=serverPrefix;t.post(m+"/userInfo/userSignUp",u,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(e){var t=e.success;if(t)var r=e.data.userName,a=e.data.rollNumber,o=e.data.userId,i=e.data.contactNumber,n=e.data.emailAddress,s=e.data.password,l=e.data.collegeName,c=e.data.userCategories,d=e.data.collegeBranches;else{var g=e.message;showAlertMessage(g)}if(t){window.localStorage.email=n,window.localStorage.password=s;var u={register_email:n,user_id:o,contact_nos:i,register_password:s,register_name:r,register_college:l,register_roll:a,interestedCategories:c,userCollegeBranches:d};window.localStorage.profileData=JSON.stringify(u),$("#loginPage").hide(),$("#toolbar").show(),$("#category-page").show(),app.getCount("Notices"),menu.setSwipeable(!0)}else showAlertMessage("Your registration failed try again")}).error(function(e){showAlertMessage(e.message),showAlertMessage("Sorry,no internet connection available right now.Please try again later")}),$("#register_submitButton").removeAttr("disabled")}else showAlertMessage("You must enter a valid email ,password and matching confirm password "),$("#register_submitButton").removeAttr("disabled")}}]),e.controller("FeedPluginCategoriesController",["$scope","$http","FeedPluginData",function(e,t,r){t({method:"GET",url:r.url}).success(function(t,r,a,o){e.categories=t.categories}).error(function(e,t,r,a){}),e.retrieveCollege=function(e){if(void 0!=window.localStorage.profileData){var t=JSON.parse(window.localStorage.getItem("profileData"));return t.register_college}},e.showDetail=function(t){var a=e.categories[t],o=JSON.parse(window.localStorage.getItem("profileData"));r.selectedItem=a,r.profileData=o,"notices"==a.title.toLowerCase()&&app.getCount("Notices"),e.ons.navigator.pushPage("feed-category.html",{title:a.title})},e.showHiddenPage=function(e){$("#loginPage").is(":hidden")&&void 0!=window.localStorage.email&&void 0!=window.localStorage.password&&($("#toolbar").show(),$("#category-page").show())},e.getNotificationEarlyHack=function(){app.getCount("Notices")},e.getName=function(e){return"a"}}]),e.controller("FeedPluginCategoryController",["$scope","FeedPluginData",function(e,t){e.title=t.selectedItem.title,t.mainCategory=t.selectedItem.title,$.each(t.profileData.interestedCategories,function(e,r){"notices"==t.mainCategory.toLowerCase()&&(void 0!=window.localStorage["#notificationNoticesCount-"+r.categoryId]?r.categoryNotifications=JSON.parse(window.localStorage.getItem("#notificationNoticesCount-"+r.categoryId)):r.categoryNotifications=0)});var r=t.profileData.interestedCategories;r=r.sort(function(e,t){var r=window.localStorage.getItem("#notificationTimestampNoticesDate-"+t.categoryId),a=window.localStorage.getItem("#notificationTimestampNoticesDate-"+e.categoryId);return r-a}),e.items=r,e.showDetail=function(r){var a=e.items[r];t.selectedItem=a,e.ons.navigator.pushPage("feed-master.html",{title:a.categoryName})}}]),e.controller("FeedPluginMasterController",["$scope","$http","FeedPluginData",function(e,t,r){function a(t){var a=1,o=15;e.paginationLimit=function(){return o*a},e.hasMoreItems=function(){return a<Object.keys(t).length/o},e.showMoreItems=function(){a+=1},e.showDetail=function(a){var o=t[a];r.selectedItem=o,e.ons.navigator.pushPage("feed-detail.html",o)}}e.msg="Loading...",e.feeds="";var o=r.profileData.user_id,i=window.localStorage.getItem("regIdPush"),n=new FormData;n.append("userId",o),n.append("deviceKey",i);var s="/userInfo/registerDevice",l=serverPrefix;t.post(l+s,n,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(e){}).error(function(e){});var o=r.profileData.user_id,c=r.mainCategory,d=r.selectedItem.categoryId,g=r.selectedItem.categoryName,u=r.selectedItem.categoryDescription;if(void 0!=window.localStorage["feedEntriesData"+c+d+g]){e.title=g,e.description=u;var m=JSON.parse(window.localStorage.getItem("feedEntriesData"+c+d+g));m=$.map(m,function(e,t){return[e]}),e.feeds=m,a(m)}var p=serverPrefix+"/noticeInfo/getNotices?userId="+o+"&categoriesToFetch="+d;"notices"==c.toLowerCase()&&(p=serverPrefix+"/noticeInfo/getNotices?userId="+o+"&categoriesToFetch="+d),t({method:"GET",url:p,async:!1}).success(function(t,r,o,i){var n=t.success;if(n){var s=t.data,l={},m={},p=0,f={};"notices"==c.toLowerCase()&&$.each(s,function(e,t){var r=new Date(t.creationDate),a=r.toDateString();f={id:t.noticeId,title:t.noticeHeading,images:{url1:t.noticeImageId},publishedDate:t.creationDate,content:t.noticeDescription,urlLink:t.noticeUrl,socialLink:t.noticeFBUrl,postedById:t.userInfo.userId,postedByRoll:t.userInfo.rollNumber,postedByName:t.userInfo.userName,seenCount:t.seenCount,contentSnippet:a},m[p++]=f}),l={entries:m},e.title=g,e.description=u,e.feeds=l.entries;var w=l.entries,h=JSON.stringify(w);window.localStorage["feedEntriesData"+c+d+g]=h;var v=$.map(w,function(e,t){return[e]});e.feeds=v,w=v,e.msg="",a(w)}else if(e.title=g,e.description=u,void 0!=window.localStorage["feedEntriesData"+c+d+g]){showAlertMessage("Sorry,no new notices available right now...");var w=JSON.parse(window.localStorage.getItem("feedEntriesData"+c+d+g));w=$.map(w,function(e,t){return[e]}),e.feeds=w,e.msg="",a(w)}else{t.message;showAlertMessage("Sorry,no new notices available right now..."),e.msg=""}}).error(function(t,r,o,i){if(void 0!=window.localStorage["feedEntriesData"+c+d+g]){e.title=g,e.description=u,showAlertMessage("No internet connection available.");var n=JSON.parse(window.localStorage.getItem("feedEntriesData"+c+d+g));n=$.map(n,function(e,t){return[e]}),e.feeds=n,e.msg="",a(n)}else e.title=g,e.description=u,e.msg="No notices to fetch in this category"})}]),e.controller("FeedPluginDetailController",["$scope","$http","$sce","FeedPluginData",function(e,t,r,a){e.item=a.selectedItem,e.item.mainCategory=a.mainCategory,e.item.title=a.selectedItem.title,e.item.publishedFullDate=new Date(a.selectedItem.publishedDate),e.item.publishedDate=e.item.publishedFullDate.toDateString(),e.item.content=a.selectedItem.content,e.item.urlLink=a.selectedItem.urlLink,e.item.socialLink=a.selectedItem.socialLink,e.item.postedByName=a.selectedItem.postedByName,e.item.postedById=a.selectedItem.postedById,e.item.postedByRoll=a.selectedItem.postedByRoll,e.item.myUserId=a.profileData.user_id,void 0!=e.item.images&&(e.item.images.url1=a.selectedItem.images.url1),"notices"==a.mainCategory.toLowerCase()&&(e.item.noticeId=a.selectedItem.id),e.deleteItem=function(){var r=confirm("Are you sure you want to delete?");if(r){var o=new FormData,i="";"notices"==a.mainCategory.toLowerCase()&&(o.append("noticeId",e.item.noticeId),i="/noticeInfo/deleteNotice");var n=serverPrefix;t.post(n+i,o,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(e){var t=e.success;if(t)showAlertMessage("Successfully deleted the notice");else{var r=e.message;showAlertMessage("Sorry,unable to delete the notice.Please try after some time..."+r)}}).error(function(e){showAlertMessage("Sorry,no internet connection available right now.Please try again later.")})}},e.checkItemPermission=function(){return e.item.myUserId==e.item.postedById},e.setInfoState=function(r){var o=confirm("Are you sure you want to mark report item?");if(o){var i=new FormData,n="";"notices"==a.mainCategory.toLowerCase()&&(i.append("noticeId",e.item.noticeId),n="/noticeInfo/changeNoticeState"),"spam"==r.toLowerCase()?i.append("infoState","REPORTED_SPAM"):"abuse"==r.toLowerCase()&&i.append("infoState","REPORTED_ABUSE");var s=serverPrefix;t.post(s+n,i,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(e){var t=e.success;if(t)showAlertMessage("This notice has been reported for review....");else{var r=e.message;showAlertMessage("Sorry...Unable to report now.Please try later .."+r)}}).error(function(e){showAlertMessage("Sorry,no internet connection available right now. Please try again later..")})}},e.getTrustedResourceUrl=function(e){return r.trustAsResourceUrl(e)},e.loadURL=function(e){"http"!=e.substring(0,4).toLowerCase()&&(e="http://"+e),window.open(e,"_blank")},e.shareFeed=function(){var t="Shared Notice from COLLEGE LOOPIN app",r=e.item.title+":"+e.item.content;r=r.replace(/(<([^>]+)>)/gi,"");var a="https://play.google.com/store/apps/details?id=com.collegeloopin";window.plugins.socialsharing.share(r,t,null,a)}}]),e.controller("noticePostController",["$scope","$http",function(e,t){var r=JSON.parse(window.localStorage.getItem("profileData")),a=r.interestedCategories;if(!r.special_user){var o=["Internship","Placement","Fest","Sharing Goods","MBA","Masters","First Year","Second Year","Third Year","Fourth Year","Hostel","Alumni","Music","Sports","Food","Travel","Events","Technology","Marketing","Competitions","Entrepreneurship","Deals","Others"];a=a.filter(function(e){return o.indexOf(e.categoryName)>-1})}var i="iPad"==navigator.userAgent.match(/iPad/i)?"iPad":"iPhone"==navigator.userAgent.match(/iPhone/i)?"iPhone":"Android"==navigator.userAgent.match(/Android/i)?"Android":"BlackBerry"==navigator.userAgent.match(/BlackBerry/i)?"BlackBerry":"null";e.allCategories=a,e.disableButton=!1,e.postNoticeButtonText="Post Notice",e.deviceType=i,e.capturePhotoEdit=function(){navigator.camera.getPicture(e.onPhotoDataSuccess,e.onFail,{quality:20,allowEdit:!0,destinationType:destinationType.DATA_URL})},e.onFail=function(e){showAlertMessage("Unable to upload image. Reason :  "+e)},e.onPhotoDataSuccess=function(t){t="data:image/jpeg;base64,"+t,e.imageBlob=e.dataURItoBlob(t);var r=document.getElementById("uploadPreview");r.src=t},e.dataURItoBlob=function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var r=e.split(",")[0].split(":")[1].split(";")[0],a=new Uint8Array(t.length),o=0;o<t.length;o++)a[o]=t.charCodeAt(o);return new Blob([a],{type:r})},e.loadImageFile=function(){var t=new FileReader;if(t.onload=function(t){var r=new Image;r.onload=function(){var t=document.createElement("canvas"),a=t.getContext("2d");t.width=399,t.height=300,a.drawImage(r,0,0,r.width,r.height,0,0,t.width,t.height),document.getElementById("uploadPreview").src=t.toDataURL();var o=t.toDataURL();e.imageBlob=e.dataURItoBlob(o)},r.src=t.target.result},0!==document.getElementById("uploadImage").files.length){var r=document.getElementById("uploadImage").files[0];t.readAsDataURL(r)}},e.submitForm=function(){e.postNoticeButtonText="Wait ...",e.disableButton=!0;var r=e.subject,a=e.message,o=e.url,i=e.fbUrl,n=e.imageBlob,s=e.isSelected;if(void 0==r||""==r)return showAlertMessage("Please provide a heading for the notice.."),e.postNoticeButtonText="Post Notice",e.disableButton=!1,!1;if(void 0==s||""==s)return showAlertMessage("Please select a category for the notice.."),e.postNoticeButtonText="Post Notice",e.disableButton=!1,!1;var l=JSON.parse(window.localStorage.getItem("profileData")),c=l.user_id,d=new FormData;d.append("userId",c),d.append("noticeHeading",r),d.append("noticeDescription",a),d.append("categories",s),d.append("noticeUrl",o),d.append("noticeFBUrl",i),d.append("noticeImageFile",n);var g=serverPrefix;t.post(g+"/noticeInfo/postNotice",d,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(t){var r=t.success;if(r)showAlertMessage("Your notice has been successfully posted"),e.disableButton=!1,e.postNoticeButtonText="Post Notice",e.subject="",e.message="",e.cat1="",e.url="",e.fbUrl="",e.imageBlob="",e.isSelected="",document.getElementById("uploadPreview").src="";else{var a=t.message;showAlertMessage("Sorry.Unable to post notice currently.Please try later.Reason :"+a),e.disableButton=!1,e.postNoticeButtonText="Post Notice"}}).error(function(t){showAlertMessage("Sorry,no internet connection available right now. Please try again later.."),e.disableButton=!1,e.postNoticeButtonText="Post Notice"})}}]),e.controller("profileController",["$scope","$http","FeedPluginData",function(e,t,r){var a=$.parseJSON(window.localStorage.getItem("profileData"));e.name=a.register_name,e.email=a.register_email,e.college=a.register_college,e.contactNumber=a.contact_nos,e.roll=a.register_roll,e.yearGrad=a.register_yearGrad,void 0!=a.register_branch&&null!=a.register_branch&&""!=a.register_branch&&(e.branch=a.register_branch.branchName),e.company=a.register_company,e.status=a.register_status,e.fbUrl=a.register_fbUrl,e.twitterUrl=a.register_twitterUrl,e.interests=a.register_interests,e.linkedinUrl=a.register_linkedinUrl,e.loadURL=function(e){"http"!=e.substring(0,4).toLowerCase()&&(e="http://"+e),window.open(e,"_blank")},e.editProfile=function(){e.ons.navigator.pushPage("editProfile.html",{compulsory:"selectedItem.categoryName"})}}]),e.controller("editProfileController",["$scope","$http",function(e,t){var r=$.parseJSON(window.localStorage.getItem("profileData"));e.editProfileButtonText="Submit",e.name=r.register_name,e.email=r.register_email,e.college=r.register_college,e.userCollegeBranches=r.userCollegeBranches,e.contactNumber=r.contact_nos,e.roll=r.register_roll,e.yearGrad=r.register_yearGrad,null!=r.register_branch&&(e.branch=r.register_branch.branchId),e.company=r.register_company,e.user_id=r.user_id,e.status=r.register_status,e.fbUrl=r.register_fbUrl,e.twitterUrl=r.register_twitterUrl,e.interests=r.register_interests,e.linkedinUrl=r.register_linkedinUrl,null==e.branch&&(e.branch="");for(var a=[],o=1970;2030>=o;o++)a.push(o);e.gradYearList=a,e.userSelectedBranch=function(e){return e==r.register_branch.branchId?!0:void 0},e.userSelectedYear=function(e){return e==r.register_yearGrad?!0:void 0},e.submitForm=function(){e.disableButton=!0,e.editProfileButtonText="Wait...";var r=e.contactNumber,a=e.roll,o=e.user_id,i=e.yearGrad,n=e.branch,s=e.company,l=e.status,c=e.fbUrl,d=e.twitterUrl,g=e.linkedinUrl,u=e.interests,m=new FormData;void 0!=a&&null!=a&&m.append("rollNumber",a),void 0!=i&&null!=i&&""!=i&&m.append("yearGrad",i),void 0!=r&&null!=r&&m.append("contactNumber",r),void 0!=n&&null!=n&&""!=n&&m.append("branch",n),void 0!=s&&null!=s&&m.append("company",s),void 0!=l&&null!=l&&m.append("status",l),void 0!=c&&null!=c&&m.append("fbUrl",c),void 0!=d&&null!=d&&m.append("twitterUrl",d),void 0!=g&&null!=g&&m.append("linkedinUrl",g),void 0!=u&&null!=u&&m.append("interests",u),m.append("userId",o);var p=serverPrefix;t.post(p+"/userInfo/editUserInfo",m,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(t){var r=t.success;if(r){showAlertMessage("Your information has been edited . Go back.");var a=t.data.userName,o=t.data.rollNumber,i=t.data.userId,n=t.data.yearGrad,s=t.data.branch,l=t.data.company,c=t.data.contactNumber,d=t.data.collegeBranches,g=t.data.emailAddress,u=t.data.password,m=t.data.collegeName,p=t.data.userCategories,f=t.data.status,w=t.data.fbUrl,h=t.data.twitterUrl,v=t.data.linkedinUrl,y=t.data.interests,b=t.data.specialUser,_={register_email:g,user_id:i,contact_nos:c,register_yearGrad:n,register_branch:s,userCollegeBranches:d,register_company:l,register_password:u,register_name:a,register_college:m,register_roll:o,interestedCategories:p,register_status:f,register_fbUrl:w,register_twitterUrl:h,register_linkedinUrl:v,register_interests:y,special_user:b};window.localStorage.profileData=JSON.stringify(_),e.disableButton=!1,e.editProfileButtonText="Submit"}else{var I=t.message;showAlertMessage("Following error occured while editing profile info : "+I),e.disableButton=!1,e.editProfileButtonText="Submit"}}).error(function(t){showAlertMessage("Sorry,no internet connection available right now. Please try again later.."),e.disableButton=!1,e.editProfileButtonText="Submit"})}}]),e.controller("peopleSearchController",["$scope","$http",function(e,t){var r=$.parseJSON(window.localStorage.getItem("profileData"));e.user_id=r.user_id,e.userCollegeBranches=r.userCollegeBranches;for(var a=[],o=1970;2030>=o;o++)a.push(o);e.gradYearList=a,e.searchButtonText="Submit",e.submitForm=function(){e.disableButton=!0,e.searchButtonText="Wait...";var r=e.user_id,a=e.name,o=e.roll,i=e.yearGrad,n=e.branch,s=e.interest,l=e.company,c=new FormData;c.append("userId",r),c.append("userName",a),c.append("rollNumber",o),c.append("yearGrad",i),c.append("branch",n),c.append("interest",s),c.append("company",l),(void 0==a||null==a)&&(a=""),(void 0==o||null==o)&&(o=""),(void 0==i||null==i)&&(i=""),(void 0==n||null==n)&&(n=""),(void 0==s||null==s)&&(s=""),(void 0==l||null==l)&&(l="");var d=serverPrefix,g=d+"/userInfo/searchUser?userId="+r+"&userName="+a+"&rollNumber="+o+"&yearGrad="+i+"&interest="+s+"&branch="+n+"&company="+l;t({method:"GET",url:g}).success(function(t){var a=t.success;if(a){var o=[],i={},n=t.data;$.each(n,function(e,t){var a=t.userName,n=t.rollNumber,s=t.collegeName,l=t.status,c=t.fbUrl,d=t.graduationYear;if(void 0!=t.branch&&null!=t.branch&&""!=t.branch)var g=t.branch.branchName;var u=t.company,m=t.twitterUrl,p=t.linkedInUrl,f=t.interests,w={user_id:r,singleUser_name:a,singleUser_college:s,singleUser_roll:n,singleUser_yearGrad:d,singleUser_branch:g,singleUser_company:u,singleUser_status:l,singleUser_fbUrl:c,singleUser_twitterUrl:m,singleUser_linkedinUrl:p,singleUser_interests:f};o.push(w),i[e]=w}),window.localStorage.searchDataWrapper=JSON.stringify(i),e.ons.navigator.pushPage("searchDisplay.html"),e.disableButton=!1,e.searchButtonText="Submit"}else{var s=t.message;showAlertMessage("Following error occurred while searching :"+s),e.disableButton=!1,e.searchButtonText="Submit"}}).error(function(t){showAlertMessage("Sorry,no internet connection available right now. Please try again later.."),e.disableButton=!1,e.searchButtonText="Submit"})}}]),e.controller("searchDisplayController",["$scope",function(e){var t=$.parseJSON(window.localStorage.getItem("searchDataWrapper"));e.feeds=$.map(t,function(e,t){return[e]}),e.showDetail=function(t){var r=e.feeds[t];e.ons.navigator.pushPage("searchSingleUserDisplay.html",{selectedItem:r})}}]),e.controller("searchSingleUserDisplayController",["$scope","$http","FeedPluginData",function(e,t,r){var a=e.ons.navigator.getCurrentPage().options.selectedItem;e.name=a.singleUser_name,e.email=a.singleUser_email,e.yearGrad=a.singleUser_yearGrad,e.branch=a.singleUser_branch,e.company=a.singleUser_company,e.college=a.singleUser_college,e.contactNumber=a.singleUser_contactNumber,e.roll=a.singleUser_roll,e.status=a.singleUser_status,e.fbUrl=a.singleUser_fbUrl,e.twitterUrl=a.singleUser_twitterUrl,e.interests=a.singleUser_interests,e.linkedinUrl=a.singleUser_linkedinUrl,e.loadURL=function(e){"http"!=e.substring(0,4).toLowerCase()&&(e="http://"+e),window.open(e,"_blank")}}]),e.controller("menuController",["$scope",function(e){e.showHiddenHome=function(){$("#toolbar").show(),$("#category-page").show()}}])}();